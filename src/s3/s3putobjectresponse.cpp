// S3PutObjectResponse.cpp
// By Mike Kuta
// Thursday, August 20, 2015
//
// Class for response to request to put object to Amazon S3.
//
// Extension of libqtaws.  libqtaws is licensed under the GNU Lesser General Public License.
//
// https://github.com/pcolby/libqtaws
//
// Copyright Â© 2015 Kuta Software LLC.  All rights reserved.


#include "s3putobjectresponse.h"
#include "s3putobjectresponse_p.h"

#include <QDebug>
#include <QByteArray>
#include <QNetworkReply>
#include <QXmlStreamReader>

QTAWS_BEGIN_NAMESPACE




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
S3PutObjectResponse::S3PutObjectResponse(const S3PutObjectRequest & request, QNetworkReply * const reply, QObject * const parent)
    : S3Response(new S3PutObjectResponsePrivate(this), parent)
{
    setRequest(new S3PutObjectRequest(request));
    setReply(reply);
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
bool S3PutObjectResponse::isValid() const
{
    // Unsure what to put in here
    return S3Response::isValid();
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const S3PutObjectRequest * S3PutObjectResponse::request() const
{
    Q_D(const S3PutObjectResponse);
    return static_cast<const S3PutObjectRequest *>(d->request);
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void S3PutObjectResponse::parseSuccess(QIODevice & response)
{
    QNetworkReply * pReply = qobject_cast<QNetworkReply *>(&response);
    Q_ASSERT(pReply);
    QLatin1String result(pReply->readAll());
    qDebug() << "Response\n====================\n" << result << "\n====================\n";
}




//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
S3PutObjectResponsePrivate::S3PutObjectResponsePrivate(S3PutObjectResponse * const q)
    : S3ResponsePrivate(q)
{

}

QTAWS_END_NAMESPACE
